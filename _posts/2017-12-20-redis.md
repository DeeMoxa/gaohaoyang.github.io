---
layout: post
title: Macä¸‹å®‰è£…redis
tags: [redis,mac,OSX]
---
## å®˜ç½‘å®‰è£…
mac ä¸Šå®‰è£… redis é¦–å…ˆå¿…é¡»ä¿è¯mac å·²ç»å®‰è£… xcode.

å› ä¸ºmakeæ—¶è¦ç”¨åˆ° Xcode çš„command Tools .

-  [ä¸‹è½½ redis ](https://redis.io/download)
```
$ wget http://download.redis.io/releases/redis-4.0.2.tar.gz
$ tar xzf redis-4.0.2.tar.gz
$ cd redis-4.0.2
$ make
```
- ç»ˆç«¯ä¸‹è½½:  
```
curl -O http://redis.googlecode.com/files/redis-2.8.7.tar.gz
sudo tar -zxf redis-2.8.7.tar.gz
```
- ä¿®æ”¹æ–‡ä»¶å¤¹å,ç¼–è¯‘
```
mv redis-2.8.7 redis
cd redis/
sudo make
sudo make test
sudo make isntall
```
- æ‰“å¼€confæ–‡ä»¶  
```
vim /usr/local/redis-4.0.2/redis.conf
```
æ‰¾åˆ°
```
dir  ./
```
è¿™ä¸€è¡Œé…ç½®
æ­¤é…ç½®æ˜¯å°†å†…å­˜ä¸­çš„æ•°æ®å†™å…¥ä¸€ä¸ªæ–‡ä»¶,è¿™ä¸ªæ•°æ®åº“æ–‡ä»¶è¦ä¿å­˜åˆ°ä»€ä¹ˆåœ°æ–¹ å°±æ˜¯è¿™ä¸ªé…ç½®é¡¹èµ·åˆ°çš„ä½œç”¨.
æˆ‘åœ¨macæ ¹ç›®å½•ä¸‹åˆ›å»ºäº† ```/Users/***/develop/config/redis ```çš„æ–‡ä»¶å¤¹(*æ³¨æ„æ­¤æ–‡ä»¶å¤¹å¿…é¡»æœ‰å¯è¯»å†™æƒé™*)
æ‰€ä»¥è¿™ä¸€è¡Œçš„é…ç½®æ˜¯ dir ```/Users/***/develop/config/redis```
ä¿®æ”¹åä¿å­˜é…ç½®æ–‡ä»¶ï¼ŒåŒæ—¶å°†é…ç½®æ–‡ä»¶ç§»åŠ¨åˆ° /etc ç›®å½•ä¸‹.
```
sudo mv redis.conf /etc
```
- ä¸Šé¢ç¬¬ä¸‰æ­¥ ```make install ```æˆåŠŸåï¼Œä½ å°±åº”è¯¥åœ¨è¿™ä¸ªç›®å½•ä¸‹çœ‹åˆ°redis  
```
/usr/local/bin/redis-server
```
- å°è¯•å¯åŠ¨ä¸€ä¸‹ redis  
```
cd /usr/local/bin
./redis-server /etc/redis.conf
```
- confæ–‡ä»¶ç›¸å…³é…ç½®  

| åŠŸèƒ½     | æ“ä½œå®ç°     |
| :------------- | :------------- |
| è®¾ç½®çº¿ç¨‹å®ˆæŠ¤æ¨¡å¼(åå°å¯åŠ¨)  | daemonize=yes       |
| è®¾ç½®è¿›ç¨‹é”æ–‡ä»¶  | pidfile /usr/local/redis/redis.pid  |
| port  |  6379 |
| timeout   |  300 |
|  æ—¥å¿—çº§åˆ« | loglevel debug  |
| <span style="color:red;"> æ—¥å¿—ä½ç½®</span> | logfile /usr/local/redis/log-redis.log  |
|<span style="color:red;"> æŒ‡å®šæœ¬åœ°æ•°æ®åº“è·¯å¾„ </span>| dir /usr/local/redis/db/   |
|  è®¾ç½®æ•°æ®åº“çš„æ•°é‡ï¼Œé»˜è®¤æ•°æ®åº“ä¸º0ï¼Œå¯ä»¥ä½¿ç”¨SELECT <dbid>å‘½ä»¤åœ¨è¿æ¥ä¸ŠæŒ‡å®šæ•°æ®åº“id |  databases 8 |

**æ³¨**ï¼šæ ‡çº¢å‚æ•°è¦æ³¨æ„ä¿®æ”¹ï¼Œå¦åˆ™æ³¨æ„æŸ¥çœ‹æŠ¥é”™æ—¥å¿—ï¼Œredisæ˜¯å¦å·²å¯åŠ¨
{: .notice--warning}

- redis-cliå‘½ä»¤æ€»ç»“  

| åŠŸèƒ½     | å‘½ä»¤     |
| :------------- | :------------- |
| è¿œç¨‹é“¾æ¥       | redis-cli -h \{host\} -p {port} {command}      |
|  å…³é—­ | redis-cli shutdown  |

## homebrewå®‰è£…
```
âœ  bin brew install redis
==> Downloading https://homebrew.bintray.com/bottles/redis-4.0.10.high_sierra.bottle.tar.gz
######################################################################## 100.0%
==> Pouring redis-4.0.10.high_sierra.bottle.tar.gz
==> Caveats
To have launchd start redis now and restart at login:
  brew services start redis
Or, if you don't want/need a background service you can just run:
  redis-server /usr/local/etc/redis.conf
==> Summary
ğŸº  /usr/local/Cellar/redis/4.0.10: 13 files, 2.8MB
```
